!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(l){a=!0,r=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function r(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{FTmn:function(t,e,n){"use strict";function i(t){return Array.from(regeneratorRuntime.mark(function t(e){var n,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=a(e),t.prev=1,n.s();case 3:if((i=n.n()).done){t.next=8;break}return r=i.value,t.delegateYield(r,"t0",6);case 6:t.next=3;break;case 8:t.next=13;break;case 10:t.prev=10,t.t1=t.catch(1),n.e(t.t1);case 13:return t.prev=13,n.f(),t.finish(13);case 16:case"end":return t.stop()}},t,null,[[1,10,13,16]])})(t))}n.d(e,"a",function(){return i})},GHWt:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n("gj+k"),n("mrVq"),n("WHjf");var i=n("CiDq");function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.a;if(a=t.length){if((e=+e)<=0||a<2)return+n(t[0],0,t);if(e>=1)return+n(t[a-1],a-1,t);var a,r=(a-1)*e,o=Math.floor(r),s=+n(t[o],o,t);return s+(+n(t[o+1],o+1,t)-s)*(r-o)}}},WHjf:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("APuy");function a(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.a;o>n;){if(o-n>600){var l=o-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1);a(t,e,Math.max(n,Math.floor(e-c*d/l+f)),Math.min(o,Math.floor(e+(l-c)*d/l+f)),s)}var p=t[e],h=n,b=o;for(r(t,n,e),s(t[o],p)>0&&r(t,n,o);h<b;){for(r(t,h,b),++h,--b;s(t[h],p)<0;)++h;for(;s(t[b],p)>0;)--b}0===s(t[n],p)?r(t,n,b):r(t,++b,o),b<=e&&(n=b+1),e<=b&&(o=b-1)}return t}function r(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}},Wm2z:function(n,a,r){"use strict";r.r(a),r.d(a,"ProjectsModule",function(){return jn});var o,s=r("ofXK"),l=r("PCNd"),c=r("tyNb"),u=r("Ankt"),d=r("fXoL"),f=r("3FDT"),p=((o=function(){function t(n){e(this,t),this.service=n}return i(t,[{key:"resolve",value:function(t,e){return this.service.getBeyondData()}}]),t}()).\u0275fac=function(t){return new(t||o)(d.Nb(f.a))},o.\u0275prov=d.Ab({token:o,factory:o.\u0275fac,providedIn:"root"}),o),h=r("VphZ"),b=[{value:"2012",name:"2012",title:"2012"},{value:"2016",name:"2016",title:"2016"},{value:"change",name:"Change",title:"Change in Margin, 2012 - 2016"}],v=[{value:"president",name:"President",title:"US Presidential Election Results by Census Tract"},{value:"senate",name:"US Senate",title:"US Senate Election Results by Census Tract"},{value:"house",name:"US House",title:"US House of Representatives Election Results by Census Tract"}],g=[{value:"current",name:"2015",title:"2015"},{value:"change",name:"Change 2010-2015",title:"Change, 2010 - 2015"}],y=[{value:"populationDensity",name:"Population Density",title:"Population Density of Each Census Tract",yAxis:"population density",xAxis:"population/sq mi"},{value:"nonWhite",name:"Percent Non-White",title:"Percent Non-White Population for Each Census Tract",yAxis:"percent non-white",xAxis:"% of total population"},{value:"unemployment",name:"Percent Unemployed",title:"Percent of Population Unemployed for Each Census Tract",yAxis:"percent unemployed",xAxis:"% of total population"},{value:"college",name:"Education",title:"Percent of Population with College Degree for Each Census Tract",yAxis:"college degree",xAxis:"% of total population"},{value:"income",name:"Income",title:"Income",yAxis:"median income",xAxis:"household income"}],m={vote:{r:Object(h.m)().domain([0,1]).range(["#f8e5e6","#dd0035"]),d:Object(h.m)().domain([-1,0]).range(["#3c5bff","#d2e4ff"])},change:{r:Object(h.m)().domain([0,.5]).range(["#f8e5e6","#dd0035"]),d:Object(h.m)().domain([-.5,0]).range(["#3c5bff","#e6f0ff"])}},x=r("TXIv"),k=1e-6,w=Math.PI,S=w/2,j=w/4,O=2*w,M=180/w,C=w/180,A=Math.abs,V=Math.atan,D=Math.atan2,E=Math.cos,T=(Math,Math,Math,Math,Math,Math,Math.sin),P=Math.sign||function(t){return t>0?1:t<0?-1:0},F=Math.sqrt;function _(t){return t>1?S:t<-1?-S:Math.asin(t)}function I(){}Math;var R=function(){var t,e=[];return{point:function(e,n,i){t.push([e,n,i])},lineStart:function(){e.push(t=[])},lineEnd:I,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},B=function(t,e){return A(t[0]-e[0])<k&&A(t[1]-e[1])<k};function K(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}var J=function(t,e,n,i,a){var r,o,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],o=t[e];if(B(i,o)){if(!i[2]&&!o[2]){for(a.lineStart(),r=0;r<e;++r)a.point((i=t[r])[0],i[1]);return void a.lineEnd()}o[0]+=2e-6}s.push(n=new K(i,t,null,!0)),l.push(n.o=new K(i,null,n,!1)),s.push(n=new K(o,t,null,!1)),l.push(n.o=new K(o,null,n,!0))}}),s.length){for(l.sort(e),Y(s),Y(l),r=0,o=l.length;r<o;++r)l[r].e=n=!n;for(var c,u,d=s[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;c=f.z,a.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(r=0,o=c.length;r<o;++r)a.point((u=c[r])[0],u[1]);else i(f.x,f.n.x,1,a);f=f.n}else{if(p)for(r=(c=f.p.z).length-1;r>=0;--r)a.point((u=c[r])[0],u[1]);else i(f.x,f.p.x,-1,a);f=f.p}c=(f=f.o).z,p=!p}while(!f.v);a.lineEnd()}}};function Y(t){if(e=t.length){for(var e,n,i=0,a=t[0];++i<e;)a.n=n=t[i],n.p=a,a=n;a.n=n=t[0],n.p=a}}var z=r("xOP2");function q(t){return[D(t[1],t[0]),_(t[2])]}function N(t){var e=t[0],n=t[1],i=E(n);return[i*E(e),i*T(e),T(n)]}function U(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function L(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function W(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function G(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function H(t){var e=F(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function X(t){return A(t[0])<=w?t[0]:P(t[0])*((A(t[0])+w)%O-w)}var Z=r("FTmn"),Q=function(t,e,n,i){return function(a){var r,o,s,l=e(a),c=R(),u=e(c),d=!1,f={point:p,lineStart:b,lineEnd:v,polygonStart:function(){f.point=g,f.lineStart=y,f.lineEnd=m,o=[],r=[]},polygonEnd:function(){f.point=p,f.lineStart=b,f.lineEnd=v,o=Object(Z.a)(o);var t=function(t,e){var n=X(e),i=e[1],a=T(i),r=[T(n),-E(n),0],o=0,s=0,l=new z.a;1===a?i=S+k:-1===a&&(i=-S-k);for(var c=0,u=t.length;c<u;++c)if(f=(d=t[c]).length)for(var d,f,p=d[f-1],h=X(p),b=p[1]/2+j,v=T(b),g=E(b),y=0;y<f;++y,h=x,v=C,g=A,p=m){var m=d[y],x=X(m),M=m[1]/2+j,C=T(M),A=E(M),V=x-h,P=V>=0?1:-1,F=P*V,I=F>w,R=v*C;if(l.add(D(R*P*T(F),g*A+R*E(F))),o+=I?V+P*O:V,I^h>=n^x>=n){var B=L(N(p),N(m));H(B);var K=L(r,B);H(K);var J=(I^V>=0?-1:1)*_(K[2]);(i>J||i===J&&(B[0]||B[1]))&&(s+=I^V>=0?1:-1)}}return(o<-k||o<k&&l<-1e-12)^1&s}(r,i);o.length?(d||(a.polygonStart(),d=!0),J(o,tt,t,n,a)):t&&(d||(a.polygonStart(),d=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),d&&(a.polygonEnd(),d=!1),o=r=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function p(e,n){t(e,n)&&a.point(e,n)}function h(t,e){l.point(t,e)}function b(){f.point=h,l.lineStart()}function v(){f.point=p,l.lineEnd()}function g(t,e){s.push([t,e]),u.point(t,e)}function y(){u.lineStart(),s=[]}function m(){g(s[0][0],s[0][1]),u.lineEnd();var t,e,n,i,l=u.clean(),f=c.result(),p=f.length;if(s.pop(),r.push(s),s=null,p)if(1&l){if((e=(n=f[0]).length-1)>0){for(d||(a.polygonStart(),d=!0),a.lineStart(),t=0;t<e;++t)a.point((i=n[t])[0],i[1]);a.lineEnd()}}else p>1&&2&l&&f.push(f.pop().concat(f.shift())),o.push(f.filter($))}return f}};function $(t){return t.length>1}function tt(t,e){return((t=t.x)[0]<0?t[1]-S-k:S-t[1])-((e=e.x)[0]<0?e[1]-S-k:S-e[1])}var et=Q(function(){return!0},function(t){var e,n=NaN,i=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(r,o){var s=r>0?w:-w,l=A(r-n);A(l-w)<k?(t.point(n,i=(i+o)/2>0?S:-S),t.point(a,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(r,i),e=0):a!==s&&l>=w&&(A(n-a)<k&&(n-=a*k),A(r-s)<k&&(r-=s*k),i=function(t,e,n,i){var a,r,o=T(t-n);return A(o)>k?V((T(e)*(r=E(i))*T(n)-T(i)*(a=E(e))*T(t))/(a*r*o)):(e+i)/2}(n,i,r,o),t.point(a,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=r,i=o),a=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var a;if(null==t)i.point(-w,a=n*S),i.point(0,a),i.point(w,a),i.point(w,0),i.point(w,-a),i.point(0,-a),i.point(-w,-a),i.point(-w,0),i.point(-w,a);else if(A(t[0]-e[0])>k){var r=t[0]<e[0]?w:-w;i.point(-r,a=n*r/2),i.point(0,a),i.point(r,a)}else i.point(e[0],e[1])},[-w,-S]),nt=function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n};function it(t,e){return[A(t)>w?t+Math.round(-t/O)*O:t,e]}function at(t){return function(e,n){return[(e+=t)>w?e-O:e<-w?e+O:e,n]}}function rt(t){var e=at(t);return e.invert=at(-t),e}function ot(t,e){var n=E(t),i=T(t),a=E(e),r=T(e);function o(t,e){var o=E(e),s=E(t)*o,l=T(t)*o,c=T(e),u=c*n+s*i;return[D(l*a-u*r,s*n-c*i),_(u*a+l*r)]}return o.invert=function(t,e){var o=E(e),s=E(t)*o,l=T(t)*o,c=T(e),u=c*a-l*r;return[D(l*a+c*r,s*n+u*i),_(u*n-s*i)]},o}function st(t,e){(e=N(e))[0]-=t,H(e);var n,i=(n=-e[1])>1?0:n<-1?w:Math.acos(n);return((-e[2]<0?-i:i)+O-k)%O}it.invert=it;var lt=function(t){var e=E(t),n=6*C,i=e>0,a=A(e)>k;function r(t,n){return E(t)*E(n)>e}function o(t,n,i){var a=[1,0,0],r=L(N(t),N(n)),o=U(r,r),s=r[0],l=o-s*s;if(!l)return!i&&t;var c=e*o/l,u=-e*s/l,d=L(a,r),f=G(a,c);W(f,G(r,u));var p=d,h=U(f,p),b=U(p,p),v=h*h-b*(U(f,f)-1);if(!(v<0)){var g=F(v),y=G(p,(-h-g)/b);if(W(y,f),y=q(y),!i)return y;var m,x=t[0],S=n[0],j=t[1],O=n[1];S<x&&(m=x,x=S,S=m);var M=S-x,C=A(M-w)<k;if(!C&&O<j&&(m=j,j=O,O=m),C||M<k?C?j+O>0^y[1]<(A(y[0]-x)<k?j:O):j<=y[1]&&y[1]<=O:M>w^(x<=y[0]&&y[0]<=S)){var V=G(p,(-h+g)/b);return W(V,f),[y,q(V)]}}}function s(e,n){var a=i?t:w-t,r=0;return e<-a?r|=1:e>a&&(r|=2),n<-a?r|=4:n>a&&(r|=8),r}return Q(r,function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,f){var p,h=[d,f],b=r(d,f),v=i?b?0:s(d,f):b?s(d+(d<0?w:-w),f):0;if(!e&&(c=l=b)&&t.lineStart(),b!==l&&(!(p=o(e,h))||B(e,p)||B(h,p))&&(h[2]=1),b!==l)u=0,b?(t.lineStart(),p=o(h,e),t.point(p[0],p[1])):(p=o(e,h),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(a&&e&&i^b){var g;v&n||!(g=o(h,e,!0))||(u=0,i?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1],3)))}!b||e&&B(e,h)||t.point(h[0],h[1]),e=h,l=b,n=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}},function(e,i,a,r){!function(t,e,n,i,a,r){if(n){var o=E(e),s=T(e),l=i*n;null==a?(a=e+i*O,r=e-l/2):(a=st(o,a),r=st(o,r),(i>0?a<r:a>r)&&(a+=i*O));for(var c,u=a;i>0?u>r:u<r;u-=l)c=q([o,-s*E(u),-s*T(u)]),t.point(c[0],c[1])}}(r,t,n,a,e,i)},i?[0,-t]:[-w,t-w])};function ct(t,e,n,i){function a(a,r){return t<=a&&a<=n&&e<=r&&r<=i}function r(a,r,s,c){var u=0,d=0;if(null==a||(u=o(a,s))!==(d=o(r,s))||l(a,r)<0^s>0)do{c.point(0===u||3===u?t:n,u>1?i:e)}while((u=(u+s+4)%4)!==d);else c.point(r[0],r[1])}function o(i,a){return A(i[0]-t)<k?a>0?0:3:A(i[0]-n)<k?a>0?2:1:A(i[1]-e)<k?a>0?1:0:a>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,c,u,d,f,p,h,b,v,g,y,m=o,x=R(),k={point:w,lineStart:function(){k.point=S,c&&c.push(u=[]),g=!0,v=!1,h=b=NaN},lineEnd:function(){l&&(S(d,f),p&&v&&x.rejoin(),l.push(x.result())),k.point=w,v&&m.lineEnd()},polygonStart:function(){m=x,l=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,a=c.length;n<a;++n)for(var r,o,s=c[n],l=1,u=s.length,d=s[0],f=d[0],p=d[1];l<u;++l)r=f,o=p,f=(d=s[l])[0],p=d[1],o<=i?p>i&&(f-r)*(i-o)>(p-o)*(t-r)&&++e:p<=i&&(f-r)*(i-o)<(p-o)*(t-r)&&--e;return e}(),n=y&&e,a=(l=Object(Z.a)(l)).length;(n||a)&&(o.polygonStart(),n&&(o.lineStart(),r(null,null,1,o),o.lineEnd()),a&&J(l,s,e,r,o),o.polygonEnd()),m=o,l=c=u=null}};function w(t,e){a(t,e)&&m.point(t,e)}function S(r,o){var s=a(r,o);if(c&&u.push([r,o]),g)d=r,f=o,p=s,g=!1,s&&(m.lineStart(),m.point(r,o));else if(s&&v)m.point(r,o);else{var l=[h=Math.max(-1e9,Math.min(1e9,h)),b=Math.max(-1e9,Math.min(1e9,b))],x=[r=Math.max(-1e9,Math.min(1e9,r)),o=Math.max(-1e9,Math.min(1e9,o))];!function(t,e,n,i,a,r){var o,s=t[0],l=t[1],c=0,u=1,d=e[0]-s,f=e[1]-l;if(o=n-s,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<u&&(u=o)}else if(d>0){if(o>u)return;o>c&&(c=o)}if(o=a-s,d||!(o<0)){if(o/=d,d<0){if(o>u)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<u&&(u=o)}if(o=i-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<u&&(u=o)}else if(f>0){if(o>u)return;o>c&&(c=o)}if(o=r-l,f||!(o<0)){if(o/=f,f<0){if(o>u)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<u&&(u=o)}return c>0&&(t[0]=s+c*d,t[1]=l+c*f),u<1&&(e[0]=s+u*d,e[1]=l+u*f),!0}}}}}(l,x,t,e,n,i)?s&&(m.lineStart(),m.point(r,o),y=!1):(v||(m.lineStart(),m.point(l[0],l[1])),m.point(x[0],x[1]),s||m.lineEnd(),y=!1)}h=r,b=o,v=s}return k}}var ut=function(t){return t};function dt(t){return function(e){var n=new ft;for(var i in t)n[i]=t[i];return n.stream=e,n}}function ft(){}function pt(t,e){t&&bt.hasOwnProperty(t.type)&&bt[t.type](t,e)}ft.prototype={constructor:ft,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ht={Feature:function(t,e){pt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)pt(n[i].geometry,e)}},bt={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)e.point((t=n[i])[0],t[1],t[2])},LineString:function(t,e){vt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)vt(n[i],e,0)},Polygon:function(t,e){gt(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)gt(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)pt(n[i],e)}};function vt(t,e,n){var i,a=-1,r=t.length-n;for(e.lineStart();++a<r;)e.point((i=t[a])[0],i[1],i[2]);e.lineEnd()}function gt(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)vt(t[n],e,1);e.polygonEnd()}var yt=function(t,e){t&&ht.hasOwnProperty(t.type)?ht[t.type](t,e):pt(t,e)},mt=1/0,xt=mt,kt=-mt,wt=kt,St={point:function(t,e){t<mt&&(mt=t),t>kt&&(kt=t),e<xt&&(xt=e),e>wt&&(wt=e)},lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I,result:function(){var t=[[mt,xt],[kt,wt]];return kt=wt=-(xt=mt=1/0),t}};function jt(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),yt(n,t.stream(St)),e(St.result()),null!=i&&t.clipExtent(i),t}function Ot(t,e,n){return jt(t,function(n){var i=e[1][0]-e[0][0],a=e[1][1]-e[0][1],r=Math.min(i/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),o=+e[0][0]+(i-r*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(a-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([o,s])},n)}var Mt=E(30*C),Ct=function(t,e){return+e?function(t,e){function n(i,a,r,o,s,l,c,u,d,f,p,h,b,v){var g=c-i,y=u-a,m=g*g+y*y;if(m>4*e&&b--){var x=o+f,w=s+p,S=l+h,j=F(x*x+w*w+S*S),O=_(S/=j),M=A(A(S)-1)<k||A(r-d)<k?(r+d)/2:D(w,x),C=t(M,O),V=C[0],E=C[1],T=V-i,P=E-a,I=y*T-g*P;(I*I/m>e||A((g*T+y*P)/m-.5)>.3||o*f+s*p+l*h<Mt)&&(n(i,a,r,o,s,l,V,E,M,x/=j,w/=j,S,b,v),v.point(V,E),n(V,E,M,x,w,S,c,u,d,f,p,h,b,v))}}return function(e){var i,a,r,o,s,l,c,u,d,f,p,h,b={point:v,lineStart:g,lineEnd:m,polygonStart:function(){e.polygonStart(),b.lineStart=x},polygonEnd:function(){e.polygonEnd(),b.lineStart=g}};function v(n,i){n=t(n,i),e.point(n[0],n[1])}function g(){u=NaN,b.point=y,e.lineStart()}function y(i,a){var r=N([i,a]),o=t(i,a);n(u,d,c,f,p,h,u=o[0],d=o[1],c=i,f=r[0],p=r[1],h=r[2],16,e),e.point(u,d)}function m(){b.point=v,e.lineEnd()}function x(){g(),b.point=k,b.lineEnd=w}function k(t,e){y(i=t,e),a=u,r=d,o=f,s=p,l=h,b.point=y}function w(){n(u,d,c,f,p,h,a,r,i,o,s,l,16,e),b.lineEnd=m,m()}return b}}(t,e):function(t){return dt({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},At=dt({point:function(t,e){this.stream.point(t*C,e*C)}});function Vt(t,e,n,i,a,r){if(!r)return function(t,e,n,i,a){function r(r,o){return[e+t*(r*=i),n-t*(o*=a)]}return r.invert=function(r,o){return[(r-e)/t*i,(n-o)/t*a]},r}(t,e,n,i,a);var o=E(r),s=T(r),l=o*t,c=s*t,u=o/t,d=s/t,f=(s*n-o*e)/t,p=(s*e+o*n)/t;function h(t,r){return[l*(t*=i)-c*(r*=a)+e,n-c*t-l*r]}return h.invert=function(t,e){return[i*(u*t-d*e+f),a*(p-d*t-u*e)]},h}function Dt(t,e){var n=T(t),i=(n+T(e))/2;if(A(i)<k)return function(t){var e=E(t);function n(t,n){return[t*e,T(n)/e]}return n.invert=function(t,n){return[t/e,_(n*e)]},n}(t);var a=1+n*(2*i-n),r=F(a)/i;function o(t,e){var n=F(a-2*i*T(e))/i;return[n*T(t*=i),r-n*E(t)]}return o.invert=function(t,e){var n=r-e,o=D(t,A(n))*P(n);return n*i<0&&(o-=w*P(t)*P(n)),[o/i,_((a-(t*t+n*n)*i*i)/(2*i))]},o}var Et,Tt,Pt,Ft,_t=function(){return(t=Dt,e=0,n=w/3,i=function(t){var e,n,i,a,r,o,s,l,c,u,d=150,f=480,p=250,h=0,b=0,v=0,g=0,y=0,m=0,x=1,k=1,w=null,S=et,j=null,A=ut,V=.5;function D(t){return l(t[0]*C,t[1]*C)}function E(t){return(t=l.invert(t[0],t[1]))&&[t[0]*M,t[1]*M]}function T(){var t=Vt(d,0,0,x,k,m).apply(null,e(h,b)),i=Vt(d,f-t[0],p-t[1],x,k,m);return n=function(t,e,n){return(t%=O)?e||n?nt(rt(t),ot(e,n)):rt(t):e||n?ot(e,n):it}(v,g,y),s=nt(e,i),l=nt(n,s),o=Ct(s,V),P()}function P(){return c=u=null,D}return D.stream=function(t){return c&&u===t?c:c=At(function(t){return dt({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(S(o(A(u=t)))))},D.preclip=function(t){return arguments.length?(S=t,w=void 0,P()):S},D.postclip=function(t){return arguments.length?(A=t,j=i=a=r=null,P()):A},D.clipAngle=function(t){return arguments.length?(S=+t?lt(w=t*C):(w=null,et),P()):w*M},D.clipExtent=function(t){return arguments.length?(A=null==t?(j=i=a=r=null,ut):ct(j=+t[0][0],i=+t[0][1],a=+t[1][0],r=+t[1][1]),P()):null==j?null:[[j,i],[a,r]]},D.scale=function(t){return arguments.length?(d=+t,T()):d},D.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],T()):[f,p]},D.center=function(t){return arguments.length?(h=t[0]%360*C,b=t[1]%360*C,T()):[h*M,b*M]},D.rotate=function(t){return arguments.length?(v=t[0]%360*C,g=t[1]%360*C,y=t.length>2?t[2]%360*C:0,T()):[v*M,g*M,y*M]},D.angle=function(t){return arguments.length?(m=t%360*C,T()):m*M},D.reflectX=function(t){return arguments.length?(x=t?-1:1,T()):x<0},D.reflectY=function(t){return arguments.length?(k=t?-1:1,T()):k<0},D.precision=function(t){return arguments.length?(o=Ct(s,V=t*t),P()):F(V)},D.fitExtent=function(t,e){return Ot(D,t,e)},D.fitSize=function(t,e){return function(t,e,n){return Ot(t,[[0,0],e],n)}(D,t,e)},D.fitWidth=function(t,e){return function(t,e,n){return jt(t,function(n){var i=+e,a=i/(n[1][0]-n[0][0]),r=(i-a*(n[1][0]+n[0][0]))/2,o=-a*n[0][1];t.scale(150*a).translate([r,o])},n)}(D,t,e)},D.fitHeight=function(t,e){return function(t,e,n){return jt(t,function(n){var i=+e,a=i/(n[1][1]-n[0][1]),r=-a*n[0][0],o=(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([r,o])},n)}(D,t,e)},function(){return e=t.apply(this,arguments),D.invert=e.invert&&E,T()}}(t),a=i(e,n),a.parallels=function(t){return arguments.length?i(e=t[0]*C,n=t[1]*C):[e*M,n*M]},a).scale(155.424).center([0,33.6442]).parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]);var t,e,n,i,a},It=new z.a,Rt=new z.a,Bt={point:I,lineStart:I,lineEnd:I,polygonStart:function(){Bt.lineStart=Kt,Bt.lineEnd=zt},polygonEnd:function(){Bt.lineStart=Bt.lineEnd=Bt.point=I,It.add(A(Rt)),Rt=new z.a},result:function(){var t=It/2;return It=new z.a,t}};function Kt(){Bt.point=Jt}function Jt(t,e){Bt.point=Yt,Et=Pt=t,Tt=Ft=e}function Yt(t,e){Rt.add(Ft*t-Pt*e),Pt=t,Ft=e}function zt(){Yt(Et,Tt)}var qt,Nt,Ut,Lt,Wt=Bt,Gt=0,Ht=0,Xt=0,Zt=0,Qt=0,$t=0,te=0,ee=0,ne=0,ie={point:ae,lineStart:re,lineEnd:le,polygonStart:function(){ie.lineStart=ce,ie.lineEnd=ue},polygonEnd:function(){ie.point=ae,ie.lineStart=re,ie.lineEnd=le},result:function(){var t=ne?[te/ne,ee/ne]:$t?[Zt/$t,Qt/$t]:Xt?[Gt/Xt,Ht/Xt]:[NaN,NaN];return Gt=Ht=Xt=Zt=Qt=$t=te=ee=ne=0,t}};function ae(t,e){Gt+=t,Ht+=e,++Xt}function re(){ie.point=oe}function oe(t,e){ie.point=se,ae(Ut=t,Lt=e)}function se(t,e){var n=t-Ut,i=e-Lt,a=F(n*n+i*i);Zt+=a*(Ut+t)/2,Qt+=a*(Lt+e)/2,$t+=a,ae(Ut=t,Lt=e)}function le(){ie.point=ae}function ce(){ie.point=de}function ue(){fe(qt,Nt)}function de(t,e){ie.point=fe,ae(qt=Ut=t,Nt=Lt=e)}function fe(t,e){var n=t-Ut,i=e-Lt,a=F(n*n+i*i);Zt+=a*(Ut+t)/2,Qt+=a*(Lt+e)/2,$t+=a,te+=(a=Lt*t-Ut*e)*(Ut+t),ee+=a*(Lt+e),ne+=3*a,ae(Ut=t,Lt=e)}var pe=ie;function he(t){this._context=t}he.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,O)}},result:I};var be,ve,ge,ye,me,xe=new z.a,ke={point:I,lineStart:function(){ke.point=we},lineEnd:function(){be&&Se(ve,ge),ke.point=I},polygonStart:function(){be=!0},polygonEnd:function(){be=null},result:function(){var t=+xe;return xe=new z.a,t}};function we(t,e){ke.point=Se,ve=ye=t,ge=me=e}function Se(t,e){xe.add(F((ye-=t)*ye+(me-=e)*me)),ye=t,me=e}var je=ke;function Oe(){this._string=[]}function Me(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Oe.prototype={_radius:4.5,_circle:Me(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Me(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var Ce=function(t,e){var n,i,a=4.5;function r(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),yt(t,n(i))),i.result()}return r.area=function(t){return yt(t,n(Wt)),Wt.result()},r.measure=function(t){return yt(t,n(je)),je.result()},r.bounds=function(t){return yt(t,n(St)),St.result()},r.centroid=function(t){return yt(t,n(pe)),pe.result()},r.projection=function(e){return arguments.length?(n=null==e?(t=null,ut):(t=e).stream,r):t},r.context=function(t){return arguments.length?(i=null==t?(e=null,new Oe):new he(e=t),"function"!=typeof a&&i.pointRadius(a),r):e},r.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),r):a},r.projection(t).context(e)},Ae=r("AKWm"),Ve=r("2TRZ"),De=r("XNiG"),Ee=function(t){return t},Te=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return Pe(t,e)})}:Pe(t,e)};function Pe(t,e){var n=e.id,i=e.bbox,a=null==e.properties?{}:e.properties,r=function(t,e){var n=function(t){if(null==t)return Ee;var e,n,i=t.scale[0],a=t.scale[1],r=t.translate[0],o=t.translate[1];return function(t,s){s||(e=n=0);var l=2,c=t.length,u=new Array(c);for(u[0]=(e+=t[0])*i+r,u[1]=(n+=t[1])*a+o;l<c;)u[l]=t[l],++l;return u}}(t.transform),i=t.arcs;function a(t,e){e.length&&e.pop();for(var a=i[t<0?~t:t],r=0,o=a.length;r<o;++r)e.push(n(a[r],r));t<0&&function(t,e){for(var n,i=t.length,a=i-e;a<--i;)n=t[a],t[a++]=t[i],t[i]=n}(e,o)}function r(t){return n(t)}function o(t){for(var e=[],n=0,i=t.length;n<i;++n)a(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(s)}return function t(e){var n,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":n=r(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(r);break;case"LineString":n=o(e.arcs);break;case"MultiLineString":n=e.arcs.map(o);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:i,coordinates:n}}(e)}(t,e);return null==n&&null==i?{type:"Feature",properties:a,geometry:r}:null==i?{type:"Feature",id:n,properties:a,geometry:r}:{type:"Feature",id:n,bbox:i,properties:a,geometry:r}}var Fe=new ArrayBuffer(16);new Float64Array(Fe),new Uint32Array(Fe),Math,Math,Math,Math,Math;var _e,Ie=((_e=function(){function t(n){e(this,t),this.beyondService=n,this.mapCreated=!1,this.divId="#beyond-map",this.width=900,this.height=540,this.viewPlaceNames=!0,this.mapZoom=Object(Ve.a)().scaleExtent([1,10]),this.destroy$=new De.a}return i(t,[{key:"ngOnInit",value:function(){this.makeMap()}},{key:"ngOnChanges",value:function(){this.mapCreated&&this.updateMap()}},{key:"makeMap",value:function(){this.makeSvg(),this.makeMapGroup(),this.makeZoomRect(),this.makeBaseMap(),this.makeCities(),this.updateMap(),this.makeMapInterface(),this.mapCreated=!0}},{key:"makeSvg",value:function(){this.svg=Object(Ae.a)(this.divId).append("svg").attr("width",this.width).attr("height",this.height)}},{key:"makeMapGroup",value:function(){this.map=this.svg.append("g").attr("viewBox","0 0 ".concat(this.width," ").concat(this.height)).attr("width","100%").attr("height","100%").attr("id","beyond-map-g")}},{key:"makeZoomRect",value:function(){this.map.append("rect").attr("id","beyond-zoom-box").attr("class","click-overlay").attr("width","100%").attr("height","100%").attr("fill","none").on("mouseover",function(t){Object(Ae.a)(t.currentTarget).style("stroke","#cccccc").style("stroke-width","3px").style("stroke-linecap","butt").style("stroke-dasharray","2, 3")}).on("mouseout",function(t){Object(Ae.a)(t.currentTarget).style("stroke","none")})}},{key:"makeBaseMap",value:function(){var t=this;this.projection=_t().rotate([77.1945,0]).center([0,41.2033]),this.mapPath=Ce().projection(this.projection).pointRadius(function(e){return t.getMarkerRadiusFromPopulation(e)});var e=Te(this.beyondService.tractsTopojson,this.beyondService.tractsTopojson.objects.PA_CensusTracts_2010);this.projection.scale(1).translate([0,0]);var n=this.mapPath.bounds(e),i=.95/Math.max((n[1][0]-n[0][0])/this.width,(n[1][1]-n[0][1])/this.height),a=[(this.width-i*(n[1][0]+n[0][0]))/2,(this.height-i*(n[1][1]+n[0][1]))/2];this.projection.scale(i).translate(a),this.mapZoom.on("zoom",function(){return t.onMapZoom()}),this.svg.call(this.mapZoom),this.map.append("g").selectAll("path").data(e.features).enter().append("path").attr("class","tracts vote-tracts").attr("tractno",function(t){return t.properties.GEO_ID}).attr("d",this.mapPath).style("stroke-width","0.8px")}},{key:"updateMap",value:function(){var t=this,e=this.mapCreated?300:0,n=Object(h.q)().duration(e).ease(x.a);this.map.selectAll(".tracts").transition(n).style("fill",function(e){var n=t.beyondService.tractData[e.properties.GEO_ID][t.electionType][t.electionYear];return!n||isNaN(n)?"#cccccc":(n>=0?m.vote.r:m.vote.d)(n)}).style("stroke",function(e){var n=t.beyondService.tractData[e.properties.GEO_ID][t.electionType][t.electionYear];return!n||isNaN(n)?"#cccccc":(n>=0?m.vote.r:m.vote.d)(n)})}},{key:"makeCities",value:function(){var t=this,e=Te(this.beyondService.citiesTopojson,this.beyondService.citiesTopojson.objects.PA_Cities);this.map.selectAll(".city").data(e.features).enter().append("path").attr("d",this.mapPath).attr("class","city").attr("visibility",function(e){return t.getVisibilityFromPopulation(e)}),this.map.selectAll(".city-label").data(e.features).enter().append("text").attr("class","city-label").attr("transform",function(e){return"translate("+t.projection(e.geometry.coordinates)+")"}).attr("visibility",function(e){return t.getVisibilityFromPopulation(e)}).attr("dy",function(t){return"Bethlehem"==t.properties.City||"Philadelphia"==t.properties.City||"Pittsburgh"==t.properties.City?"-.35em":".7em"}).attr("x",function(t){return t.geometry.coordinates[0]>-77.1945?-5:5}).style("text-anchor",function(t){return t.geometry.coordinates[0]>-77.1945?"end":"start"}).text(function(t){return t.properties.City})}},{key:"makeMapInterface",value:function(){var t=this;this.svg.append("text").attr("id","beyond-explore-text").attr("class","map-text").attr("x",this.width-15).attr("y",45).text("zoom and move map to explore"),this.svg.append("text").attr("id","beyond-how-text").attr("class","map-text-sm").attr("x",this.width-15).attr("y",535).text("double click or pinch to zoom");var e=this.svg.append("text").attr("id","beyond-placenames-text").attr("class","map-sel-text").attr("x",this.width-15).attr("y",25).text(function(){return t.viewPlaceNames?"placenames: on":"placenames: off"});this.svg.append("rect").attr("class","click-overlay").attr("id","beyond-placenames-box").attr("width",120).attr("height",20).attr("x",this.width-125).attr("y",10).attr("fill","none").on("click",function(){return t.togglePlaceNames(e)}).on("mouseover",function(t){Object(Ae.a)(t.currentTarget).style("cursor","pointer")}).on("mouseout",function(t){Object(Ae.a)(t.currentTarget).style("cursor","default")}),this.svg.append("rect").attr("class","click-overlay-variable").attr("id","beyond-reset-box").attr("width",120).attr("height",30).attr("x",this.width-125).attr("y",30).attr("fill","none").attr("pointer-events","none").on("click",function(){return t.resetZoom()}).on("mouseover",function(t){Object(Ae.a)(t.currentTarget).style("cursor","pointer")}).on("mouseout",function(t){Object(Ae.a)(t.currentTarget).style("cursor","default")})}},{key:"getMapSvg",value:function(){return Object(Ae.a)(this.divId).selectAll("svg")}},{key:"getMapG",value:function(){return Object(Ae.a)("#beyond-map-g")}},{key:"onMapZoom",value:function(){var t=this,e=Object(Ae.a)("#beyond-zoom-box"),n=Object(Ae.a)("#beyond-placenames-text"),i=Object(Ae.a)("#beyond-explore-text"),a=Object(Ae.a)("#beyond-how-text"),r=Object(Ae.a)("#beyond-reset-box"),o=Object(Ve.c)(this.svg.node());this.map.attr("transform",o);var s=o.k,l=function(e){return t.viewPlaceNames&&(s>=1.7||+e.properties.Population>=28500)?"visible":"hidden"};this.map.selectAll(".city").attr("d",this.mapPath.pointRadius(function(e){return t.getMarkerRadiusFromPopulation(e)})).attr("visibility",function(t){return l(t)}),this.map.selectAll(".city-label").style("font-size",function(){return.7/s+"rem"}).attr("visibility",function(t){return l(t)}).attr("dy",function(t){return"Bethlehem"==t.properties.City||"Philadelphia"==t.properties.City||"Pittsburgh"==t.properties.City?-.35/s+"em":"Wilkinsburg"==t.properties.City||"Monroeville"==t.properties.City||"Upper St. Clair"==t.properties.City?3/s+"em":.7/s+"em"}).attr("x",function(t){return t.geometry.coordinates[0]>-77.1945?-7/s:7/s}).style("text-anchor",function(t){return t.geometry.coordinates[0]>-77.1945?"end":"start"});var c=s>=1.2;i.text(function(){return c?"reset map":"zoom and move map to explore"}).style("fill",function(){if(c)return"black"}),a.text(function(){return c?"":"double click or pinch to zoom"}),n.style("fill",function(){if(c)return"black"}),r.attr("pointer-events",function(){return c?"all":"none"}),s>1?e.style("stroke","#cccccc").style("stroke-width","3px").style("stroke-linecap","butt").style("stroke-dasharray","2, 3"):e.style("stroke","none")}},{key:"resetZoom",value:function(){this.svg.transition().duration(750).call(this.mapZoom.transform,Ve.b)}},{key:"togglePlaceNames",value:function(t){var e=this;this.viewPlaceNames=!this.viewPlaceNames,this.viewPlaceNames?(t.text("placenames: on"),this.map.selectAll(".city").attr("visibility",function(t){return e.getVisibilityFromPopulation(t)}),this.map.selectAll(".city-label").attr("visibility",function(t){return e.getVisibilityFromPopulation(t)})):(t.text("placenames: off"),this.map.selectAll(".city").attr("visibility","hidden"),this.map.selectAll(".city-label").attr("visibility","hidden"))}},{key:"getVisibilityFromPopulation",value:function(t){return+t.properties.Population>=28500?"visible":"hidden"}},{key:"getMarkerRadiusFromPopulation",value:function(t){return+t.properties.Population>1e6?5:+t.properties.Population>1e5?3:2}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),t}()).\u0275fac=function(t){return new(t||_e)(d.Eb(f.a))},_e.\u0275cmp=d.yb({type:_e,selectors:[["app-beyond-map"]],inputs:{electionYear:"electionYear",electionType:"electionType"},features:[d.ub],decls:1,vars:0,consts:[["id","beyond-map",1,"beyond-map"]],template:function(t,e){1&t&&d.Fb(0,"div",0)},styles:[".beyond-map{display:flex;flex-direction:column;font-family:Roboto;align-items:center}.beyond-map .click-overlay{fill:none;pointer-events:all}.beyond-map .click-overlay-variable{fill:none}.beyond-map .map-text{font:14px Roboto Mono;font-weight:400;fill:#bbb;stroke:none;text-anchor:end}.beyond-map .map-sel-text,.beyond-map .map-text-sm{font:11px Roboto Mono;font-weight:400;fill:#bbb;stroke:none;text-anchor:end}.beyond-map .reset-text{font:14px Roboto Mono;font-weight:400;fill:#bbb;stroke:none;text-anchor:end}.beyond-map .city,.beyond-map .town{fill:none;stroke:#000;vector-effect:non-scaling-stroke}.beyond-map .city-label{font:400 .7rem Roboto Mono;fill:#000;stroke:none}"],encapsulation:2}),_e),Re=r("NltA"),Be=r("GHWt"),Ke=r("Enya");function Je(t,e){var n=e.width,i=e.lineHeight,a=void 0===i?1.1:i,r=e.wrapUp,o=void 0!==r&&r;t.each(function(){for(var t,e=Object(h.o)(this),i=e.text().split(" ").reverse(),r=[],s=0,l=this.getAttribute("y"),c=this.getAttribute("x"),u=e.attr("dy"),d=e.text(null).append("tspan").attr("x",c).attr("y",l).attr("dy",u+"em");t=i.pop();)r.push(t),d.text(r.join(" ")),d.node().getComputedTextLength()>n?(r.pop(),d.text(r.join(" ")),r=[t],d=e.append("tspan").attr("x",c).attr("y",l).attr("dy",++s*a+u+"em").text(t)):d.attr("y",l);o&&e.style("transform","translate(0, -".concat(s*a-a,"em"))})}var Ye,ze=((Ye=function(){function n(t){e(this,n),this.beyondService=t,this.barCreated=!1,this.divId="#beyond-bar",this.visWidth=920,this.width={main:790,index:30},this.margin={top:60,bottom:40,main:{right:20,left:74},index:{right:10,left:10}},this.axisOffset=10,this.numQuantiles=10}return i(n,[{key:"ngOnInit",value:function(){this.makeVis()}},{key:"ngOnChanges",value:function(){this.barCreated&&this.updateVis()}},{key:"makeVis",value:function(){this.setData(),this.sortData(),this.setHeight(),this.makeYScale(),this.makeXScale(),this.makeBarMain(),this.makeBarIndex(),this.barCreated=!0}},{key:"updateVis",value:function(){this.sortData(),this.setHeight(),this.makeYScale(),this.makeXScale(),this.updateAxes();var t=Object(h.q)().duration(300).ease(x.a);this.updateBarMain(t),this.updateBarIndex(t)}},{key:"updateAxes",value:function(){Object(Ae.a)("#gridVertical").remove(),Object(Ae.a)("#gridHorizontal").remove(),Object(Ae.a)("#xAxisTop").remove(),Object(Ae.a)("#xAxisBottom").remove(),Object(Ae.a)("#yAxis").remove(),Object(Ae.a)("#zeroAxis").remove(),Object(Ke.a)(".chart-label").remove(),Object(Ke.a)(".chart-yaxis-label").remove(),this.setAxes(),Object(Ae.a)("#gridVertical").lower(),Object(Ae.a)("#gridHorizontal").lower()}},{key:"updateBarMain",value:function(t){var e=this.getBarWidthFunc(),n=this.getBarXFunc();this.updateBar(e,n,".bar.main",t)}},{key:"updateBarIndex",value:function(t){var e=this;this.updateBar(function(t){return e.width.index},function(t){return 0},".bar.index",t)}},{key:"updateBar",value:function(t,e,n,i){var a=this;this.svgMain.selectAll(n).transition(i).attr("y",function(t){return a.y(Object.keys(t)[0])}).attr("x",function(t){return e(t)}).attr("height",function(t){return a.getDemoValue(t)?1:0}).attr("width",function(e){return t(e)}).attr("fill",function(t){return a.getVoteColor(t)})}},{key:"setData",value:function(){this.data=Object.entries(this.beyondService.tractData).map(function(e){var n=t(e,2),i=n[0],a=n[1],r={};return r[i]=a,r})}},{key:"sortData",value:function(){var t=this;this.data.sort(function(e,n){return t.getDemoValue(e)||t.getDemoValue(n)?t.getDemoValue(e)?t.getDemoValue(n)?Object(h.f)(t.getDemoValue(e),t.getDemoValue(n)):-1:1:0})}},{key:"setHeight",value:function(){this.height=this.data.length}},{key:"makeYScale",value:function(){var t=this.data.map(function(t){return Object.keys(t)[0]});this.y=Object(h.l)().domain(t).rangeRound([0,this.height]),this.gridY=Object(h.m)().domain([0,this.height]).range([0,this.height])}},{key:"makeXScale",value:function(){var t=this,e=Object(h.i)(this.data.map(function(e){return t.getDemoValue(e)}));this.x=Object(h.m)().domain(e).nice().range([0,this.width.main])}},{key:"makeBarMain",value:function(){this.svgMain=Object(Ae.a)(this.divId).append("svg").attr("width",this.width.main+this.margin.main.left+this.margin.main.right).attr("height",this.height+this.margin.top+this.margin.bottom).attr("class","beyond-bar-svg-main").append("g").attr("class","beyond-bar-main-g").attr("transform","translate(0, ".concat(this.margin.top,")")),this.barMain=this.svgMain.append("g").attr("transform","translate(".concat(this.margin.main.left,", 0)")).attr("id","beyond-bar-main-g");var t=this.getBarWidthFunc(),e=this.getBarXFunc();this.setAxes(),this.makeBar(this.barMain,t,e,"bar main")}},{key:"makeAxisLabels",value:function(){var t=this,e=y.find(function(e){return e.value===t.demoType}),n="".concat(e.yAxis," decile values"),i=e.xAxis;this.barMain.append("text").attr("class","bar-main y-axis-label chart-label").text(n).attr("x",-10).attr("y",-10).style("text-anchor","end").call(Je,{width:this.margin.main.left-this.axisOffset,wrapUp:!0}),this.barMain.append("text").attr("class","bar-main x-axis-label chart-label").text(i).attr("x",this.width.main).attr("y",-36).style("text-anchor","end")}},{key:"getBarXFunc",value:function(){var t=this;return function(e){return t.x(Math.min(0,t.getDemoValue(e)))}}},{key:"getBarWidthFunc",value:function(){var t=this;return function(e){return Math.abs(t.x(t.getDemoValue(e))-t.x(0))}}},{key:"makeBarIndex",value:function(){var t=this;this.svgIndex=Object(Ae.a)(this.divId).append("svg").attr("width",this.width.index+this.margin.index.left+this.margin.index.right).attr("height",this.height+this.margin.top+this.margin.bottom).attr("class","beyond-bar-svg-index").append("g").attr("class","beyond-bar-index-g").attr("transform","translate(0, ".concat(this.margin.top,")")),this.barIndex=this.svgIndex.append("g").attr("transform","translate(".concat(this.margin.index.left,", 0)")).attr("id","beyond-bar-index-g"),this.barIndex.append("text").attr("class","bar-index drag-instructions").text("drag to select tracts in map").attr("x",this.width.index/2).attr("y",-10).style("text-anchor","middle").call(Je,{width:this.width.index+this.margin.index.left+this.margin.index.right,wrapUp:!0}),this.makeBar(this.barIndex,function(e){return t.width.index},function(t){return 0},"bar index"),this.makeBrush()}},{key:"makeBrush",value:function(){var t=this,e=Object(h.d)().extent([[0,0],[this.width.index+this.margin.index.left+this.margin.index.right,this.height]]).on("brush",function(e){t.brushTracts(e)});this.svgIndex.append("g").attr("class","brush").call(e),this.svgIndex.selectAll(".overlay").on("mousedown touchstart",this.handleIndexBarClick.bind(this))}},{key:"brushTracts",value:function(t){var e=this;if(t.selection){var n=t.selection,i=this.barIndex.selectAll("rect").filter(function(t,i,a){var r=Object(Ae.a)(a[i]).attr("y");return e.isBrushed(n,r)}).classed("brushed",!0),a=Object(Ke.a)(".vote-tracts");i.each(function(t,e,n){var i=n[e].getAttribute("tract");a.filter(function(t){return t.properties.GEO_ID===i}).raise().classed("brushed",!0).style("stroke","black").style("stroke-width","1.5px")})}}},{key:"handleIndexBarClick",value:function(){var t=this;Object(Ke.a)(".vote-tracts.brushed").classed("brushed",!1).style("stroke",function(e){return t.getVoteColorFromTractGeo(e)}).style("stroke-width","0.8px")}},{key:"getVoteColorFromTractGeo",value:function(t){var e=t.properties.GEO_ID,n=this.data.find(function(t){return Object.keys(t)[0]===e});return this.getVoteColor(n)}},{key:"isBrushed",value:function(t,e){return t[0]<=e&&e<=t[1]}},{key:"makeBar",value:function(t,e,n,i){var a=this;t.append("g").attr("class","bar-rect-g").selectAll("rect").data(this.data).join("rect").attr("class",i).attr("tract",function(t){return Object.keys(t)[0]}).attr("y",function(t){return a.y(Object.keys(t)[0])}).attr("x",function(t){return n(t)}).attr("height",function(t){return a.getDemoValue(t)?1:0}).attr("width",function(t){return e(t)}).attr("fill",function(t){return a.getVoteColor(t)})}},{key:"getDemoValue",value:function(t){return Object.values(t)[0][this.demoType][this.demoYear]}},{key:"getElectionValue",value:function(t){return Object.values(t)[0][this.electionType][this.electionYear]}},{key:"getVoteColor",value:function(t){var e=this.getElectionValue(t);return 0===e?"#cccccc":m["change"===this.electionYear?"change":"vote"][e<0?"d":"r"](e)}},{key:"getQuantileValues",value:function(t){var e=this,n=Object(Re.a)(this.numQuantiles*t).map(function(n){return n/(e.numQuantiles*t)}),i=this.data.map(function(t){return e.getDemoValue(t)}).filter(function(t){return null!==t&&!isNaN(t)});return n.map(function(t){return Object(Be.a)(i,t)})}},{key:"setAxes",value:function(){var t=this.getQuantileValues(1),e=this.getQuantileValues(5.5),n=this.getAxisTickFormat(),i=Object(h.n)().domain(t).range([0,this.height]),a=Object(h.n)().domain(e).range([0,this.height]),r=Object(h.c)().scale(this.x).tickFormat(n),o=Object(h.a)().scale(this.x).tickFormat(n),s=Object(h.b)().scale(this.y).tickSize(0).tickFormat(""),l=Object(h.b)().scale(i).tickFormat(n),c=Object(h.c)().scale(this.x).tickSize(this.height,0,0).tickFormat(""),u=Object(h.b)().scale(a).tickSize(-this.x.range()[1],0,0).tickFormat("");this.barMain.append("g").attr("class","grid vertical").attr("id","gridVertical").attr("transform","translate(0,"+(this.height+0)+")").call(c).call(function(t){return t.select(".domain").remove()}).call(function(t){return t.selectAll(".tick line").attr("stroke","black").attr("stroke-opacity",.4).attr("stroke-dasharray","2 4")}),this.barMain.append("g").attr("class","grid horizontal").attr("id","gridHorizontal").call(u).call(function(t){return t.select(".domain").remove()}).call(function(t){return t.selectAll(".tick line").attr("stroke","black").attr("stroke-opacity",.5).attr("stroke-dasharray","2,2")}),this.barMain.append("g").attr("class","x axis").attr("id","xAxisTop").attr("transform","translate(0, -".concat(this.axisOffset,")")).call(r),this.barMain.append("g").attr("class","x axis").attr("id","xAxisBottom").attr("transform","translate(0,"+(this.height+this.axisOffset)+")").call(o),this.barMain.append("g").attr("class","y axis").attr("id","yAxis").attr("transform","translate(-".concat(this.axisOffset,", 0)")).call(l),this.barMain.append("g").attr("class","zero axis").attr("id","zeroAxis").attr("transform","translate("+this.x(0)+",0)").call(s),this.barMain.selectAll(".domain").attr("stroke","black").attr("stroke-width","1"),this.barMain.selectAll(".y.axis text").style("font-size","0.8rem"),this.makeAxisLabels()}},{key:"getAxisTickFormat",value:function(){return"change"==this.demoYear?Object(h.j)(".0%"):"populationDensity"==this.demoType?Object(h.j)(",.0f"):"income"==this.demoType?Object(h.j)("$,.0f"):function(t){return t+"%"}}}]),n}()).\u0275fac=function(t){return new(t||Ye)(d.Eb(f.a))},Ye.\u0275cmp=d.yb({type:Ye,selectors:[["app-beyond-bar"]],inputs:{electionYear:"electionYear",electionType:"electionType",demoType:"demoType",demoYear:"demoYear"},features:[d.ub],decls:1,vars:0,consts:[["id","beyond-bar",1,"beyond-bar"]],template:function(t,e){1&t&&d.Fb(0,"div",0)},styles:[".beyond-bar{display:flex}.beyond-bar .y-axis-label tspan{font-family:Roboto Mono;font-size:10px;fill:#999}.beyond-bar .x-axis-label{font-family:Roboto Mono;font-size:11px;fill:#999}.beyond-bar .drag-instructions tspan{font-family:Roboto Mono;font-size:11px;text-anchor:center}"],encapsulation:2}),Ye);function qe(t,e){if(1&t&&(d.Kb(0,"div",31),d.Kb(1,"p",32),d.fc(2),d.Jb(),d.Jb()),2&t){var n=e.$implicit;d.vb(2),d.gc(n)}}var Ne=function(t){return{selected:t}};function Ue(t,e){if(1&t){var n=d.Lb();d.Kb(0,"div",33),d.Fb(1,"input",34),d.Kb(2,"label",35),d.Qb("click",function(){d.ac(n);var t=e.$implicit;return d.Tb().updateElectionType(t.value)}),d.fc(3),d.Jb(),d.Jb()}if(2&t){var i=e.$implicit,a=d.Tb();d.vb(1),d.Ub("id","election-type-sel-"+i.value)("value",i.value)("checked",a.isSelectedElectionType(i.value)),d.vb(1),d.Ub("for","election-type-sel-"+i.value)("ngClass",d.Wb(6,Ne,a.isSelectedElectionType(i.value))),d.vb(1),d.gc(i.name)}}function Le(t,e){if(1&t){var n=d.Lb();d.Kb(0,"div",36),d.Fb(1,"input",37),d.Kb(2,"label",35),d.Qb("click",function(){d.ac(n);var t=e.$implicit;return d.Tb().updateElectionYear(t.value)}),d.fc(3),d.Jb(),d.Jb()}if(2&t){var i=e.$implicit,a=d.Tb();d.vb(1),d.Ub("id","election-year-sel-"+i.value)("value",i.value)("checked",a.isSelectedElectionYear(i.value)),d.vb(1),d.Ub("for","election-year-sel-"+i.value)("ngClass",d.Wb(6,Ne,a.isSelectedElectionYear(i.value))),d.vb(1),d.hc("",i.name," ")}}function We(t,e){if(1&t){var n=d.Lb();d.Kb(0,"div",38),d.Fb(1,"input",39),d.Kb(2,"label",35),d.Qb("click",function(){d.ac(n);var t=e.$implicit;return d.Tb().updateDemoType(t.value)}),d.fc(3),d.Jb(),d.Jb()}if(2&t){var i=e.$implicit,a=d.Tb();d.vb(1),d.Ub("id","demo-type-sel-"+i.value)("value",i.value)("checked",a.isSelectedDemoType(i.value)),d.vb(1),d.Ub("for","demo-type-sel-"+i.value)("ngClass",d.Wb(6,Ne,a.isSelectedDemoType(i.value))),d.vb(1),d.gc(i.name)}}function Ge(t,e){if(1&t){var n=d.Lb();d.Kb(0,"div",40),d.Fb(1,"input",41),d.Kb(2,"label",35),d.Qb("click",function(){return d.ac(n),d.Tb().updateDemoYear()}),d.fc(3),d.Jb(),d.Jb()}if(2&t){var i=e.$implicit,a=d.Tb();d.vb(1),d.Ub("id","demo-year-sel-"+i.value)("checked","change"===a.demoYear),d.vb(1),d.Ub("for","demo-year-sel-"+i.value)("ngClass",d.Wb(5,Ne,"change"===a.demoYear)),d.vb(1),d.gc(i.name)}}var He,Xe=function(t){return[t]},Ze=((He=function(){function t(){e(this,t)}return i(t,[{key:"ngOnInit",value:function(){this.initSelections(),this.demoTypeLabels=y,this.demoYearLabels=g,this.electionTypeLabels=v,this.electionYearLabels=b,this.updateLegendValues()}},{key:"initSelections",value:function(){this.electionType="president",this.electionYear="2016",this.demoType="populationDensity",this.demoYear="current"}},{key:"updateSelection",value:function(t,e){this[t]=e}},{key:"updateElectionYear",value:function(t){this.electionYear=t,this.updateLegendValues()}},{key:"updateElectionType",value:function(t){this.electionType=t}},{key:"updateDemoType",value:function(t){this.demoType=t}},{key:"updateDemoYear",value:function(){this.demoYear="change"===this.demoYear?"current":"change"}},{key:"updateLegendValues",value:function(){var t=Object(h.k)(-100,120,20),e=Object(h.k)(-50,60,10),n=this.isSelectedElectionYear("change")?e:t;this.legendValues=n.map(function(t){return"".concat(t,"%")})}},{key:"isSelectedElectionYear",value:function(t){return t===this.electionYear}},{key:"isSelectedElectionType",value:function(t){return t===this.electionType}},{key:"isSelectedDemoType",value:function(t){return t===this.demoType}},{key:"getElectionTypeTitle",value:function(){var t=this;return this.electionTypeLabels.find(function(e){return e.value===t.electionType}).title}},{key:"getTitleElement",value:function(t,e){var n=this,i="".concat(t).concat(e[0].toUpperCase()+e.substring(1));return this["".concat(i,"Labels")].find(function(t){return t.value===n["".concat(i)]}).title}}]),t}()).\u0275fac=function(t){return new(t||He)},He.\u0275cmp=d.yb({type:He,selectors:[["app-beyond"]],decls:49,vars:17,consts:[["id","beyond-intro",1,"beyond-intro"],[1,"project-description"],["id","beyond-the-county-line",1,"beyond-div"],[3,"electionYear","electionType"],[1,"map-title"],[1,"map-title","race"],[1,"map-title","year"],[1,"legend-container"],[1,"legend-text","party","dem"],[1,"inner-legend-container"],[1,"legend-bar-container"],[1,"legend-bar","dem"],[1,"legend-bar","rep"],[1,"legend-scale-container"],["class","value-container",4,"ngFor","ngForOf"],[1,"legend-text","party","rep"],[1,"beyond-selectors"],[1,"election-selectors"],[1,"election-type-selectors"],["class","election-type-sel",4,"ngFor","ngForOf"],[1,"election-year-selectors"],["class","election-year-sel",4,"ngFor","ngForOf"],[1,"demo-selectors"],[1,"demo-type-selectors"],["class","demo-type-sel",4,"ngFor","ngForOf"],["class","election-year-sel",3,"ngClass",4,"ngFor","ngForOf"],[1,"bars-title"],[1,"bars-title","demo"],[1,"bars-title","year"],[1,"bars-title","subtitle"],[3,"electionYear","electionType","demoYear","demoType"],[1,"value-container"],[1,"legend-text","value"],[1,"election-type-sel"],["type","radio","name","electionType",3,"id","value","checked"],[3,"for","ngClass","click"],[1,"election-year-sel"],["type","radio","name","electionYear",3,"id","value","checked"],[1,"demo-type-sel"],["type","radio","name","demoType",3,"id","value","checked"],[1,"election-year-sel",3,"ngClass"],["type","checkbox","name","demoYear",3,"id","checked"]],template:function(t,e){1&t&&(d.Kb(0,"div",0),d.Kb(1,"p",1),d.fc(2,'"Demography is destiny." Or is it?'),d.Jb(),d.Kb(3,"p",1),d.fc(4,' The 2016 Presidential election called into question long-held narratives about how demographic change in the United States would effect election outcomes. Almost immediately after the election, the idea that America\'s ethnic diversification would ensure Democratic dominance was supplanted by claims that a previously overlooked "silent majority" had delivered a Republican victory. '),d.Jb(),d.Kb(5,"p",1),d.fc(6," That the national conversation about American demography could change so much more quickly than the facts of who lives in the United States suggests that the question of how demographic characteristics do or not map onto particular political positions could benefit from methodical examination of actual data. Using returns from federal elections in Pennsylvania in 2012 and 2016, as well as data from the U.S. Census Bureau's American Community Survey, this visualization allows users to literally see for themselves how five different demographic characteristics did or did not correlate to voting outcomes. It does this at a far greater resolution than what typical election analysis shows, by displaying both election and demographic data at the census tract rather than the usual county level. Disaggregating the data from 67 counties to 3,217 census tracts of approximately 4,000 people each offers a much more granular view that preserves the small, demographically and/or politically homogenous areas that tend to disappear when data is presented as county-wide averages, and that were the subject of much debate in the fall of 2016. "),d.Jb(),d.Kb(7,"p",1),d.fc(8," Users can interact with the visualization in a number of ways to understand both geographic and demographic trends in 2016 and 2012 elections, as well as change between those years. Census tract-level election results displayed in the top map can be sorted by demographic characteristic in the lower (very long) chart, allowing users to examine the data behind suppositions about voting patterns among particular demographic groups. Anomalous census tracts \u2014 for example, a tract with a high percentage of non-white residents that, unlike those who share that demographic characteristic, cast a majority of votes for the Republican candidate \u2014 can be easily visually identified, and then located in the map once selected on the right-hand side of the chart. "),d.Jb(),d.Kb(9,"p",1),d.fc(10," Although the data used in this visualization is readily available, the discrepancy between boundaries of voting districts \u2014 established and administered by state and local authorities \u2014 and those of census tracts \u2014 determined by the U.S. Census Bureau \u2014 makes the direct comparison of these two datasets challenging, and is one explanation for why few maps with this level of detail exist. I created the data shown here by aggregating vote totals from 9,256 local voting precincts to the census tracts in which they are located, splitting votes in proportion to land area in cases of boundary overlap. Because shapefiles are not available for voting precints, this operation was performed with correspondence files from the Missouri Census Data Center's MABLE/Geocorr14 project. Demographic data comes from the U.S. Census Bureau's American Community Survey. Pennsylvania precint-level election results are available from Open Elections. "),d.Jb(),d.Kb(11,"p",1),d.fc(12,"[Spring 2017]"),d.Jb(),d.Jb(),d.Kb(13,"div",2),d.Fb(14,"app-beyond-map",3),d.Kb(15,"p",4),d.Kb(16,"span",5),d.fc(17),d.Jb(),d.Kb(18,"span",6),d.fc(19),d.Jb(),d.Jb(),d.Kb(20,"div",7),d.Kb(21,"p",8),d.fc(22,"Democrat"),d.Jb(),d.Kb(23,"div",9),d.Kb(24,"div",10),d.Fb(25,"div",11),d.Fb(26,"div",12),d.Jb(),d.Kb(27,"div",13),d.dc(28,qe,3,1,"div",14),d.Jb(),d.Jb(),d.Kb(29,"p",15),d.fc(30,"Republican"),d.Jb(),d.Jb(),d.Kb(31,"div",16),d.Kb(32,"div",17),d.Kb(33,"div",18),d.dc(34,Ue,4,8,"div",19),d.Jb(),d.Kb(35,"div",20),d.dc(36,Le,4,8,"div",21),d.Jb(),d.Jb(),d.Kb(37,"div",22),d.Kb(38,"div",23),d.dc(39,We,4,8,"div",24),d.Jb(),d.dc(40,Ge,4,7,"div",25),d.Jb(),d.Jb(),d.Kb(41,"p",26),d.Kb(42,"span",27),d.fc(43),d.Jb(),d.Kb(44,"span",28),d.fc(45),d.Jb(),d.Jb(),d.Kb(46,"p",29),d.fc(47,"colored by selected election results"),d.Jb(),d.Fb(48,"app-beyond-bar",30),d.Jb()),2&t&&(d.vb(14),d.Ub("electionYear",e.electionYear)("electionType",e.electionType),d.vb(3),d.hc("",e.getTitleElement("election","type"),": "),d.vb(2),d.gc(e.getTitleElement("election","year")),d.vb(9),d.Ub("ngForOf",e.legendValues),d.vb(6),d.Ub("ngForOf",e.electionTypeLabels),d.vb(2),d.Ub("ngForOf",e.electionYearLabels),d.vb(3),d.Ub("ngForOf",e.demoTypeLabels),d.vb(1),d.Ub("ngForOf",d.Wb(15,Xe,e.demoYearLabels[1])),d.vb(3),d.hc("",e.getTitleElement("demo","type"),": "),d.vb(2),d.gc(e.getTitleElement("demo","year")),d.vb(3),d.Ub("electionYear",e.electionYear)("electionType",e.electionType)("demoYear",e.demoYear)("demoType",e.demoType))},directives:[Ie,s.i,ze,s.h],styles:['.beyond-intro p{font-variant-ligatures:common-ligatures;font-feature-settings:"liga","clig";font-family:ff-tisa-sans-web-pro,sans-serif;font-weight:400;font-style:normal}.beyond-div,.beyond-intro{display:flex;flex-direction:column}.beyond-div .beyond-selectors input[type=checkbox],.beyond-div .beyond-selectors input[type=radio]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:relative;width:1px}.beyond-intro{max-width:740px;margin:0 auto}.beyond-intro p{padding-top:1rem;text-align:justify;color:rgba(37,39,77,.85)}.beyond-intro p:last-of-type{padding-bottom:1rem}.beyond-div{font-family:Roboto;align-items:center;padding-bottom:64px}.beyond-div .beyond-selectors{display:flex;flex-direction:column;padding:24px 0}.beyond-div .beyond-selectors label{display:inline-flex;align-items:center;justify-content:center;text-align:center;font-family:Roboto Mono;font-size:14px;padding:6px 10px;border:1px solid #999;color:#999;width:120px}.beyond-div .beyond-selectors label.selected{background:#ccc;color:#fff}.beyond-div .demo-selectors,.beyond-div .election-selectors{display:flex;justify-content:space-between;font-size:.8rem}.beyond-div .demo-selectors>div:first-of-type,.beyond-div .election-selectors>div:first-of-type{margin-right:18px}.beyond-div .election-selectors{padding-bottom:1rem}.beyond-div .demo-selectors label{height:48px;line-height:.9rem}.beyond-div .demo-type-selectors,.beyond-div .election-type-selectors,.beyond-div .election-year-selectors{display:flex}.beyond-div .bars-title,.beyond-div .map-title{font-family:Roboto Mono;font-size:14px;font-weight:700;color:#666}.beyond-div .bars-title.subtitle,.beyond-div .map-title.subtitle{font-size:12px}.beyond-div .legend-container{display:flex;padding-top:18px}.beyond-div .inner-legend-container{width:560px;padding-top:4px}.beyond-div .legend-bar-container{display:flex;justify-content:center}.beyond-div .legend-bar{height:10px}.beyond-div .legend-bar.dem{flex-basis:45%;background:linear-gradient(90deg,#3c5bff,#d2e4ff)}.beyond-div .legend-bar.rep{flex-basis:45%;background:linear-gradient(90deg,#f8e5e6,#dd0035)}.beyond-div .legend-scale-container{display:flex;justify-content:space-between;padding-top:2px}.beyond-div .value-container{display:flex;flex-direction:column;flex-grow:1;width:100%}.beyond-div .legend-text{font-family:Roboto Mono;color:#999;font-size:12px}.beyond-div .legend-text.party{position:relative}.beyond-div .legend-text.party.dem{left:12px}.beyond-div .legend-text.party.rep{right:12px}.beyond-div .legend-text.value{align-self:center}'],encapsulation:2}),He),Qe=r("QpCj");function $e(t,e){return function(n){return t+n*(e-t)}}var tn=r("xo8x"),en=r("XoFe"),nn=r("tU+D"),an=r("cdIC"),rn=function(t){return function(){return t}};function on(t,e){var n=e.sourceEvent,i=e.subject,a=e.target,r=e.identifier,o=e.active,s=e.x,l=e.y,c=e.dx,u=e.dy,d=e.dispatch;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}function sn(t){return!t.ctrlKey&&!t.button}function ln(){return this.parentNode}function cn(t,e){return null==e?{x:t.x,y:t.y}:e}function un(){return navigator.maxTouchPoints||"ontouchstart"in this}on.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var dn,fn,pn,hn,bn=r("mdQd"),vn=r("jX7A"),gn=function(){function n(t,i,a,r){e(this,n),this.isDragged=!1,this.flipService=r,this.isDragged=!1,this.data=t,this.draggedData=t,this.el=i,this.visContainer=a,this.cutD=this.data.dPercent*bn.a.rows*bn.a.cols,this.cutOther=(this.data.dPercent+this.data.oPercent)*bn.a.rows*bn.a.cols,this.selectSvg(),this.makeDragRectangle(),this.makeSquares()}return i(n,[{key:"selectSvg",value:function(){this.svg=Object(h.o)(this.el).attr("class","bar").attr("district",this.data.district).style("fill","none")}},{key:"makeDragRectangle",value:function(){var t=function(){var t,e,n,i,a=sn,r=ln,o=cn,s=un,l={},c=Object(tn.a)("start","drag","end"),u=0,d=0;function f(t){t.on("mousedown.drag",p).filter(s).on("touchstart.drag",v).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(o,s){if(!i&&a.call(this,o,s)){var l=m(this,r.call(this,o,s),o,s,"mouse");l&&(Object(Ae.a)(o.view).on("mousemove.drag",h,!0).on("mouseup.drag",b,!0),Object(nn.a)(o.view),Object(an.b)(o),n=!1,t=o.clientX,e=o.clientY,l("start",o))}}function h(i){if(Object(an.a)(i),!n){var a=i.clientX-t,r=i.clientY-e;n=a*a+r*r>d}l.mouse("drag",i)}function b(t){Object(Ae.a)(t.view).on("mousemove.drag mouseup.drag",null),Object(nn.b)(t.view,n),Object(an.a)(t),l.mouse("end",t)}function v(t,e){if(a.call(this,t,e)){var n,i,o=t.changedTouches,s=r.call(this,t,e),l=o.length;for(n=0;n<l;++n)(i=m(this,s,t,e,o[n].identifier,o[n]))&&(Object(an.b)(t),i("start",t,o[n]))}}function g(t){var e,n,i=t.changedTouches,a=i.length;for(e=0;e<a;++e)(n=l[i[e].identifier])&&(Object(an.a)(t),n("drag",t,i[e]))}function y(t){var e,n,a=t.changedTouches,r=a.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),e=0;e<r;++e)(n=l[a[e].identifier])&&(Object(an.b)(t),n("end",t,a[e]))}function m(t,e,n,i,a,r){var s,d,p,h=c.copy(),b=Object(en.a)(r||n,e);if(null!=(p=o.call(t,new on("beforestart",{sourceEvent:n,target:f,identifier:a,active:u,x:b[0],y:b[1],dx:0,dy:0,dispatch:h}),i)))return s=p.x-b[0]||0,d=p.y-b[1]||0,function n(r,o,c){var v,g=b;switch(r){case"start":l[a]=n,v=u++;break;case"end":delete l[a],--u;case"drag":b=Object(en.a)(c||o,e),v=u}h.call(r,t,new on(r,{sourceEvent:o,subject:p,target:f,identifier:a,active:v,x:b[0]+s,y:b[1]+d,dx:b[0]-g[0],dy:b[1]-g[1],dispatch:h}),i)}}return f.filter=function(t){return arguments.length?(a="function"==typeof t?t:rn(!!t),f):a},f.container=function(t){return arguments.length?(r="function"==typeof t?t:rn(t),f):r},f.subject=function(t){return arguments.length?(o="function"==typeof t?t:rn(t),f):o},f.touchable=function(t){return arguments.length?(s="function"==typeof t?t:rn(!!t),f):s},f.on=function(){var t=c.on.apply(c,arguments);return t===c?f:t},f.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,f):Math.sqrt(d)},f}().on("start",this.initiateDrag.bind(this)).on("drag",this.dragChange.bind(this)).on("end",this.dragEnd.bind(this));this.svg.append("rect").attr("class","drag-bar").attr("district",this.data.district).style("pointer-events","all").attr("width",bn.a.width).attr("height",bn.a.height).style("fill","none").on("mouseover",this.handleMouseOver.bind(this)).on("mouseout",this.handleMouseOut.bind(this)).call(t)}},{key:"makeSquares",value:function(){var t=this;this.svg.selectAll(".bar-square").data(Object(Re.a)(bn.a.numSquares)).enter().append("rect").attr("class","bar-square").attr("district",this.data.district).attr("width",bn.a.squareSize-.4).attr("height",bn.a.squareSize-.4).attr("cellnum",function(t){return bn.a.numSquares-t}).attr("x",function(t){return bn.a.squareSize*(t%bn.a.cols)}).attr("y",function(t){return bn.a.squareSize*Math.floor(t/bn.a.cols)}).style("fill",bn.b.initialColor).style("stroke","ffffff").style("stroke-width",.4).style("stroke-linecap","butt").style("pointer-events","none").attr("squareColor",function(e,n,i){var a=i[n];return a.getAttribute("cellnum")<=t.cutD?bn.b.dColor:a.getAttribute("cellnum")>t.cutD&&a.getAttribute("cellnum")<=t.cutOther?bn.b.oColor:bn.b.rColor}).transition().delay(function(e,n,i){var a=i[n];return a.getAttribute("squareColor")==bn.b.dColor?bn.d.pause+a.getAttribute("cellnum")*bn.d.delay:a.getAttribute("squareColor")==bn.b.oColor?bn.d.pause+a.getAttribute("cellnum")*bn.d.delay*2+t.cutOther*bn.d.delay:a.getAttribute("squareColor")==bn.b.rColor?bn.d.pause+(t.cutD*bn.d.delay+(bn.a.numSquares-a.getAttribute("cellnum")+1)*bn.d.delay):void 0}).style("fill",function(t,e,n){return n[e].getAttribute("squareColor")})}},{key:"handleMouseOver",value:function(){this.flipService.showDistrictInfo(this.data,this.visContainer)}},{key:"handleMouseOut",value:function(){this.flipService.hideDistrictInfo(this.data,this.visContainer)}},{key:"initiateDrag",value:function(e){console.log(this),this.dragStartVotes=this.isDragged?this.draggedData:this.data;var n=t(this.getPointerCoordsOnBar(e),2),i=n[0],a=n[1],r=this.getVotesFromPosition(i,a,this.data);this.getStartParty(r),this.isDragged=!0}},{key:"dragChange",value:function(e){var n=t(this.getPointerCoordsOnBar(e),2),i=n[0],a=n[1],r=this.getVotesFromPosition(i,a,this.data);this.updateDraggedData(r),this.updateBar(),this.flipService.updateVisualization(this)}},{key:"dragEnd",value:function(){var t=this;Object(h.p)(".district-boundary").filter(function(e,n,i){return i[n].getAttribute("district")==t.data.district}).classed("active-drag",!1).classed("active-mouseover",!1),Object(h.p)(".district-boundary").filter(function(e,n,i){return i[n].getAttribute("district")!=t.data.district}).classed("active-drag-others",!1)}},{key:"getPointerCoordsOnBar",value:function(t){return[Math.max(0,Math.min(bn.a.width,t.x)),Math.max(0,Math.min(bn.a.height,t.y))]}},{key:"getVotesFromPosition",value:function(t,e,n){return Object(h.m)().domain([0,Math.sqrt(Math.pow(bn.a.height,2)+Math.pow(bn.a.width,2))]).range([0,n.totalVotes]).clamp(!0)(Math.sqrt(Math.pow(t,2)+Math.pow(e,2)))}},{key:"getStartParty",value:function(t){this.dragStartVotes.rVotes===this.data.totalVotes?this.dragStartParty=vn.b.D:this.dragStartVotes.dVotes===this.data.totalVotes||t<=this.dragStartVotes.rVotes?this.dragStartParty=vn.b.R:t>this.dragStartVotes.rVotes&&t<=this.dragStartVotes.rVotes+this.dragStartVotes.oVotes?this.dragStartParty=vn.b.O:t>this.dragStartVotes.rVotes+this.dragStartVotes.oVotes&&(this.dragStartParty=vn.b.D)}},{key:"updateDraggedData",value:function(t){var e,n,i,a=this.data.totalVotes-(this.dragStartVotes.dVotes+this.dragStartVotes.oVotes),r=this.data.totalVotes-this.dragStartVotes.dVotes;this.dragStartParty==vn.b.D?(e=this.data.totalVotes-t,t>=a&&t>=r||t>=a&&t<r?(n=this.dragStartVotes.rVotes,i=this.data.totalVotes-e-n):t<a&&(n=t,i=0)):this.dragStartParty==vn.b.R?(n=t,t<a||t>=a&&t<r?(e=this.dragStartVotes.dVotes,i=this.data.totalVotes-e-n):t>=a&&t>=r&&(e=this.data.totalVotes-t,i=0)):this.dragStartParty==vn.b.O&&(t<this.dragStartVotes.rVotes?(e=this.dragStartVotes.dVotes,n=t,i=this.data.totalVotes-e-n):t>=this.dragStartVotes.rVotes&&t<this.dragStartVotes.dVotes?(e=this.dragStartVotes.dVotes,n=this.dragStartVotes.rVotes,i=t-this.dragStartVotes.rVotes):t>=this.dragStartVotes.dVotes&&(e=this.data.totalVotes-t,n=this.dragStartVotes.rVotes,i=t-this.dragStartVotes.rVotes)),this.draggedData.dVotes=e,this.draggedData.rVotes=n,this.draggedData.oVotes=i,this.draggedData.dPercent=e/this.data.totalVotes,this.draggedData.rPercent=n/this.data.totalVotes,this.draggedData.oPercent=i/this.data.totalVotes}},{key:"updateBar",value:function(){var t=this.draggedData.dPercent*bn.a.rows*bn.a.cols,e=(this.draggedData.dPercent+this.draggedData.oPercent)*bn.a.rows*bn.a.cols;this.svg.selectAll(".bar-square").attr("squareColor",function(n,i,a){return a[i].getAttribute("cellnum")<=t?bn.b.dColor:a[i].getAttribute("cellnum")>t&&a[i].getAttribute("cellnum")<=e?bn.b.oColor:bn.b.rColor}).transition().duration(60).style("fill",function(t,e,n){return n[e].getAttribute("squareColor")})}}]),n}(),yn=r("g8i/"),mn=((dn=function(){function t(n){e(this,t),this.flipService=n,this.divId="#flip-the-district",this.introId="#flip-intro"}return i(t,[{key:"ngOnInit",value:function(){this.flipService.setFlipData()}},{key:"initVis",value:function(){this.makeVis(),Object(Qe.a)(this.divId.replace("#",""),"smooth","start")}},{key:"makeVis",value:function(){var t=Object(Ae.a)(this.divId);t.selectAll("div").remove(),t.selectAll("svg").remove(),this.makeVoteDisplay(t),this.makeBars(t),this.makeLowerVis(t),t.append("div").attr("class","reset-button").attr("width",180).attr("height",26).text("reset to 2016 results").on("click",this.resetVis.bind(this))}},{key:"makeVoteDisplay",value:function(t){var e=this,n=Object(h.j)(",.0f"),i=t.append("svg").attr("class","container").attr("width",900).attr("height",150).append("g");i.append("line").attr("class","bars-line").attr("x1",110).attr("x2",790).attr("y1",83).attr("y2",83).style("stroke","#cccccc").style("stroke-width","2px").style("stroke-linecap","butt"),i.append("text").attr("class","display-static").attr("x",450).attr("y",55).style("text-anchor","middle").text("votes"),i.append("text").attr("class","display-static").attr("x",450).attr("y",125).style("text-anchor","middle").text("seats");var a=i.append("g");a.append("text").attr("class","display-data-dem display-votes").attr("id","dVotesDisplay").attr("width",300).attr("x",225).attr("y",60).style("text-anchor","middle").style("fill",bn.b.dColor).style("stroke","none").text("0"),a.select("text").transition().ease(h.h).duration(2500).tween("text",function(t,i,a){var r=Object(Ae.a)(a[i]),o=$e(r.text(),e.flipService.stateData.dVotes);return function(t){return r.text(n(o(t)))}});var r=i.append("g");r.append("text").attr("class","display-data-rep display-votes").attr("id","rVotesDisplay").attr("width",300).attr("x",675).attr("y",60).style("text-anchor","middle").style("fill",bn.b.rColor).style("stroke","none").text("0"),r.select("text").transition().ease(h.h).duration(2500).tween("text",function(t,i,a){var r=Object(Ae.a)(a[i]),o=$e(r.text(),e.flipService.stateData.rVotes);return function(t){return r.text(n(o(t)))}});var o=i.append("g");o.append("text").attr("class","display-data-dem display-districts").attr("id","dDistrictsDisplay").attr("x",225).attr("y",125).style("text-anchor","middle").style("fill",bn.b.dColor).text(""),o.select("text").transition().duration(2500).tween("text",function(t,i,a){var r=Object(Ae.a)(a[i]),o=$e(r.text(),e.flipService.stateData.dDistricts);return function(t){return r.text(n(o(t)))}});var s=i.append("g");s.append("text").attr("class","display-data-rep display-districts").attr("id","rDistrictsDisplay").attr("x",675).attr("y",125).style("text-anchor","middle").style("fill",bn.b.rColor).text(""),s.select("text").transition().duration(2500).tween("text",function(t,i,a){var r=Object(Ae.a)(a[i]),o=$e(r.text(),e.flipService.stateData.rDistricts);return function(t){return r.text(n(o(t)))}})}},{key:"makeBars",value:function(t){var e=Object.keys(this.flipService.districtsData).length*(11+bn.a.width+11)+60,n=bn.a.height+50,i=t.append("svg").attr("class","container").attr("width",e).attr("height",n);i.append("line").attr("class","bars-line").attr("x1",0).attr("x2",e).attr("y1",25+bn.a.height/2).attr("y2",25+bn.a.height/2).style("stroke","#909090").style("stroke-width","2px").style("stroke-dasharray","2,2").style("stroke-linecap","butt"),i.append("text").attr("class","bars-line-label").attr("x",872).attr("y",25+bn.a.height/2+12).style("text-anchor","right").text("50% of"),i.append("text").attr("class","bars-line-label").attr("x",880).attr("y",25+bn.a.height/2+22).style("text-anchor","right").text("votes"),i.append("text").attr("class","district-bars-label").attr("x",e/2).attr("y",20).style("text-anchor","middle").text("pa congressional districts"),i.append("text").attr("class","district-bars-instructions").attr("x",e/2).attr("y",250).style("text-anchor","middle").text("drag the bars to change the vote"),i.selectAll("svg").data(this.flipService.flipData).enter().append("svg").attr("width",bn.a.width+11+11).attr("height",bn.a.height+0+0).attr("x",function(t,e){return 30+e*(bn.a.width+11+11)}).attr("y",25).append("g").attr("transform","translate(11,0)").each(this.makeBar.bind(this))}},{key:"makeLowerVis",value:function(t){var e=t.append("svg").attr("class","container").attr("width",900).attr("height",350);e.append("text").attr("class","display-label").attr("x",525).attr("y",65).style("text-anchor","right").text("statewide votes: 5,757,009"),e.append("text").attr("class","display-label").attr("x",860-500/9).attr("y",65).style("text-anchor","right").text("seats: 18");var n=e.append("g").attr("class","district-info-container").style("opacity",0);n.append("text").attr("class","district-info district-name"),n.append("text").attr("class","district-info year").text("2016 votes:").style("text-anchor","start"),n.append("text").attr("class","district-info total-votes").style("text-anchor","end"),n.append("text").attr("class","district-info cand-name dem"),n.append("text").attr("class","district-info cand-votes dem").style("text-anchor","end"),n.append("text").attr("class","district-info cand-name rep"),n.append("text").attr("class","district-info cand-votes rep").style("text-anchor","end"),n.append("text").attr("class","district-info cand-name oth"),n.append("text").attr("class","district-info cand-votes oth").style("text-anchor","end"),this.makeMap(e),this.makeStateVotes(e),this.makeCongressSeats(e)}},{key:"makeMap",value:function(t){var e=this,n=t.append("svg").attr("class","map-svg").attr("width",475).attr("height",300).attr("x",50).attr("y",15),i=_t().scale(6e3).rotate([77.1945,0]).center([0,41.2033]).translate([237.5,150]),a=Ce().projection(i),r=Te(this.flipService.flipTopojson,this.flipService.flipTopojson.objects.districts).features;n.append("g").selectAll("path").data(r).enter().append("path").attr("class","district-boundary").attr("d",a).attr("district",function(t){return+t.properties.CD114FP}).attr("winner",function(t){return e.flipService.getDistrictWinner(e.flipService.districtsData[+t.properties.CD114FP])}).style("fill",bn.b.initialColor).on("mouseover",this.handleMapMouseOver.bind(this)).on("mouseout",this.handleMapMouseOut.bind(this)).transition().delay(function(t){return 300+70*+t.properties.CD114FP}).duration(420).style("fill",function(t,e,n){return n[e].getAttribute("winner")==vn.b.D?bn.b.dMapColor:n[e].getAttribute("winner")==vn.b.R?bn.b.rColor:bn.b.oColor})}},{key:"handleMapMouseOver",value:function(t,e){var n=+e.properties.CD114FP,i=document.getElementById(this.divId.replace("#",""));this.flipService.showDistrictInfo(this.flipService.districtsData[n],i),Object(Ae.a)(i).selectAll("g.bar").filter(function(t,e,i){return+i[e].getAttribute("district")!==n}).selectAll("rect").style("opacity",.3)}},{key:"handleMapMouseOut",value:function(t,e){var n=+e.properties.CD114FP,i=document.getElementById(this.divId.replace("#",""));this.flipService.hideDistrictInfo(this.flipService.districtsData[n],i),Object(Ae.a)(i).filter(function(t,e,i){return+i[e].getAttribute("district")!==n}).selectAll("rect").style("opacity",1)}},{key:"makeStateVotes",value:function(t){var e=t.append("svg").attr("width",250).attr("height",250).attr("x",525).attr("y",70).append("g"),n=50*this.flipService.stateData.dPercent*50,i=50*(this.flipService.stateData.dPercent+this.flipService.stateData.oPercent)*50;e.selectAll(".grid-square").data(Object(Re.a)(2500)).enter().append("rect").attr("class","grid-square").attr("width",4.6).attr("height",4.6).attr("cellnum",function(t,e){return 2500-e}).attr("x",function(t,e){return e%50*5}).attr("y",function(t,e){return 5*Math.floor(e/50)}).style("fill",bn.b.initialColor).style("stroke","ffffff").style("stroke-width",.4).style("stroke-linecap","butt").attr("squareColor",function(){return this.getAttribute("cellnum")<=n?bn.b.dColor:this.getAttribute("cellnum")>n&&this.getAttribute("cellnum")<=i?bn.b.oColor:bn.b.rColor}).transition().delay(function(t,e,n){return n[e].getAttribute("squareColor")==bn.b.dColor?0+2.8*n[e].getAttribute("cellnum"):n[e].getAttribute("squareColor")==bn.b.oColor?i<1250?0+2.8*(2500-n[e].getAttribute("cellnum")+1)+280:0+2.8*(n[e].getAttribute("cellnum")+1)+280:n[e].getAttribute("squareColor")==bn.b.rColor?0+2.8*(2500-n[e].getAttribute("cellnum")+1):void 0}).style("fill",function(t,e,n){return n[e].getAttribute("squareColor")})}},{key:"makeCongressSeats",value:function(t){var e=this,n=9*(this.flipService.stateData.dPercent+this.flipService.stateData.oPercent)*2;t.append("svg").attr("width",55.55555555555556).attr("height",250).attr("x",804.4444444444445).attr("y",70).append("g").selectAll(".congress-square").data(Object(Re.a)(this.flipService.flipData.length)).enter().append("rect").attr("class","congress-square").attr("width",26.77777777777778).attr("height",26.77777777777778).attr("cellnum",function(t,e,n){return 18-e}).attr("x",function(t,e,n){return e%2*27.77777777777778}).attr("y",function(t,e,n){return 27.77777777777778*Math.floor(e/2)}).style("fill",bn.b.initialColor).style("stroke","ffffff").style("stroke-width",1).style("stroke-linecap","butt").attr("squareColor",function(t,n,i){return e.flipService.getCongressSquareColor(i[n])}).transition().delay(function(t,i,a){var r=e.flipService.getCongressSquareColor(a[i]);return r==bn.b.dColor?0+200*a[i].getAttribute("cellnum"):r==bn.b.oColor?n<9?0+200*(18-a[i].getAttribute("cellnum")+1)+2e4:0+200*(a[i].getAttribute("cellnum")+1)+2e4:r==bn.b.rColor?0+200*(18-a[i].getAttribute("cellnum")+1):void 0}).style("fill",function(t,n,i){return e.flipService.getCongressSquareColor(i[n])})}},{key:"makeBar",value:function(t,e,n){var i=document.getElementById(this.divId.replace("#",""));new gn(t,n[e],i,this.flipService)}},{key:"resetVis",value:function(){Object(Ae.a)(this.divId).selectAll("svg").remove(),this.flipService.setFlipData(),this.makeVis()}}]),t}()).\u0275fac=function(t){return new(t||dn)(d.Eb(yn.a))},dn.\u0275cmp=d.yb({type:dn,selectors:[["app-flip"]],decls:22,vars:0,consts:[["id","flip-intro",1,"flip-intro"],[1,"project-description"],["id","flip-the-district",1,"flip-div"],["id","flip-start-container",1,"start-container",2,"background-image","url('assets/flipthedistrict/background_text_big.png')"],[1,"flip-text"],["role","button","aria-labelledby","load-text",1,"start-button-container",3,"click"],[1,"drag-text"],[1,"enter-button"],["id","load-text",1,"load-text"]],template:function(t,e){1&t&&(d.Kb(0,"div",0),d.Kb(1,"p",1),d.fc(2," Most people are familiar with the potential for disparity between the popular and electoral vote in U.S. Presidential elections. But we hear less about similar misrepresentation in Congress, where the share of seats a party wins in the House of Representatives frequently does not match the share of votes that that party received, either within a state or at the national level. "),d.Jb(),d.Kb(3,"p",1),d.fc(4," Using data from the Pennsylvania 2016 U.S. Congressional elections, this visualization / interface helps people gain insight into how winner-takes-all electoral systems can create imbalances between the number of votes cast and number of seats awarded. Users can interact with a series of bars that visualize the proportion of votes won by each party in each of Pennsylvania/'s eighteen Congressional districts. "),d.Jb(),d.Kb(5,"p",1),d.fc(6," By dragging up or down on these bars, users can play out different scenarios with either more or less equitable representation. "),d.Jb(),d.Kb(7,"p",1),d.fc(8," Displaying the same data in a variety of visualizations, in which pixels on the screen represent different concepts (individual votes, geographic area, or a portion of a congressional district), this project also aims to illustrate how representational choices construct our understanding of data, facts, and reality. "),d.Jb(),d.Kb(9,"p",1),d.fc(10,"[Spring 2017]"),d.Jb(),d.Jb(),d.Kb(11,"div",2),d.Kb(12,"div",3),d.Kb(13,"p",4),d.fc(14,"Flip the District"),d.Jb(),d.Kb(15,"div",5),d.Qb("click",function(){return e.initVis()}),d.Kb(16,"p",6),d.fc(17,"drag the bars \u2014 change the vote"),d.Jb(),d.Kb(18,"div",7),d.fc(19,"let's go"),d.Jb(),d.Kb(20,"p",8),d.fc(21,"click to load visualization"),d.Jb(),d.Jb(),d.Jb(),d.Jb())},styles:['.flip-intro p{font-variant-ligatures:common-ligatures;font-feature-settings:"liga","clig";font-family:ff-tisa-sans-web-pro,sans-serif;font-weight:400;font-style:normal}.flip-div,.flip-intro{display:flex;flex-direction:column}.flip-intro{max-width:740px;margin:0 auto}.flip-intro p{padding-top:1rem;text-align:justify;color:rgba(37,39,77,.85)}.flip-intro p:last-of-type{padding-bottom:1rem}.flip-div{background:#fff;font-family:Roboto;align-items:center;padding-bottom:64px}.flip-div .start-container{width:660px;height:400px;margin-top:24px}.flip-div .flip-text{padding:100px 0 18px;text-align:center;font-family:Roboto Mono;font-size:42px;color:#fff;opacity:1;-webkit-animation:color-flash .5s ease-in-out infinite;animation:color-flash .5s ease-in-out infinite}@-webkit-keyframes color-flash{0%{color:#f4003d}50%{color:#ccc}to{color:#2437ff}}@keyframes color-flash{0%{color:#f4003d}50%{color:#ccc}to{color:#2437ff}}.flip-div .start-button-container{margin:0 auto;display:flex;flex-direction:column;align-items:center;opacity:1;background:#ccc;width:360px}.flip-div .drag-text{padding:8px 0;color:#fff;font-family:Roboto Mono;font-size:18px}.flip-div .load-text{color:#fff;font-family:Roboto Mono;font-size:14px;margin-bottom:12px}.flip-div .enter-button{padding:4px 16px;border:2px solid #fff;text-align:center;background:#bbb;color:#fff;font:500 18px Roboto Mono;text-transform:uppercase;margin-bottom:6px;cursor:pointer}.flip-div .enter-button:hover{background:#aaa;font-weight:700}.flip-div .enter-button:active{background:#999}.flip-div .reset-button{background:#bbb;font:12px Roboto Mono;text-transform:uppercase;color:#fff;font-weight:400;text-align:center;padding:4px 16px;cursor:pointer}.flip-div .reset-button:hover{background:#aaa;font-weight:700}.flip-div .reset-button:active{background:#999}.flip-div .active-drag{stroke-linecap:butt}.flip-div .active-drag-others{opacity:.3}.flip-div .district-boundary{stroke:#fff;stroke-width:1;stroke-linecap:round}.flip-div .active-mouseover{stroke:#fff;stroke-width:3px;opacity:.4;stroke-linecap:butt}.flip-div .bars-line-label{font:10px Roboto}.flip-div .district-info{font:10.5px Roboto;font-weight:400}.flip-div .district-info.district-name{font:11px Roboto;font-weight:700}.flip-div .district-info.year{font:10px Roboto;font-weight:400}.flip-div .dem{fill:#2437ff}.flip-div .rep{fill:#f4003d}.flip-div .oth{fill:#f6b500}.flip-div .display-data-dem{font:700 48px Roboto;fill:#2437ff;stroke:none}.flip-div .display-data-rep{font:700 48px Roboto;fill:#f4003d}.flip-div .display-label{font:10.5px Roboto Mono}.flip-div .district-bars-label{font:14px Roboto Mono;letter-spacing:1.2rem;text-transform:uppercase;font-weight:500}.flip-div .district-bars-instructions{font:14px Roboto Mono;letter-spacing:.6rem;text-transform:uppercase;font-weight:500}.flip-div .display-static{font:36px Roboto Mono;font-weight:500}.flip-div .display-votes{font-weight:900}'],encapsulation:2}),dn),xn=r("y5NY"),kn=r("5PZe"),wn=[{path:"",component:(fn=function(){function t(n){e(this,t),this.router=n}return i(t,[{key:"ngOnInit",value:function(){this.setProject()}},{key:"setProject",value:function(){var t=this;this.project=xn.a.find(function(e){return e.routerLink===t.router.url})}}]),t}(),fn.\u0275fac=function(t){return new(t||fn)(d.Eb(c.a))},fn.\u0275cmp=d.yb({type:fn,selectors:[["app-project"]],decls:3,vars:1,consts:[["id","project-navbar",1,"project-navbar",3,"title"],["id","project-container",1,"project-container"]],template:function(t,e){1&t&&(d.Fb(0,"app-content-navbar",0),d.Kb(1,"div",1),d.Fb(2,"router-outlet"),d.Jb()),2&t&&d.Ub("title",e.project.title)},directives:[kn.a,c.d],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:300px;overflow-y:auto}.project-navbar[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0}.project-container[_ngcontent-%COMP%]{height:calc(100% - 64px)}"]}),fn),children:[{path:u.c,component:mn},{path:u.a,component:Ze,resolve:{data:p}},{path:"**",redirectTo:"/landing",pathMatch:"full"}]}],Sn=((hn=function t(){e(this,t)}).\u0275mod=d.Cb({type:hn}),hn.\u0275inj=d.Bb({factory:function(t){return new(t||hn)},imports:[[c.c.forChild(wn),s.b],c.c]}),hn),jn=((pn=function t(){e(this,t)}).\u0275mod=d.Cb({type:pn}),pn.\u0275inj=d.Bb({factory:function(t){return new(t||pn)},providers:[],imports:[[s.b,Sn,l.a]]}),pn)},"gj+k":function(t,e,n){"use strict";function i(t,e){var n;if(void 0===e){var i,r=a(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;null!=o&&(n<o||void 0===n&&o>=o)&&(n=o)}}catch(d){r.e(d)}finally{r.f()}}else{var s,l=-1,c=a(t);try{for(c.s();!(s=c.n()).done;){var u=s.value;null!=(u=e(u,++l,t))&&(n<u||void 0===n&&u>=u)&&(n=u)}}catch(d){c.e(d)}finally{c.f()}}return n}n.d(e,"a",function(){return i})},mrVq:function(t,e,n){"use strict";function i(t,e){var n;if(void 0===e){var i,r=a(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;null!=o&&(n>o||void 0===n&&o>=o)&&(n=o)}}catch(d){r.e(d)}finally{r.f()}}else{var s,l=-1,c=a(t);try{for(c.s();!(s=c.n()).done;){var u=s.value;null!=(u=e(u,++l,t))&&(n>u||void 0===n&&u>=u)&&(n=u)}}catch(d){c.e(d)}finally{c.f()}}return n}n.d(e,"a",function(){return i})},xOP2:function(t,n,a){"use strict";a.d(n,"a",function(){return r});var r=function(){function t(){e(this,t),this._partials=new Float64Array(32),this._n=0}return i(t,[{key:"add",value:function(t){for(var e=this._partials,n=0,i=0;i<this._n&&i<32;i++){var a=e[i],r=t+a,o=Math.abs(t)<Math.abs(a)?t-(r-a):a-(r-t);o&&(e[n++]=o),t=r}return e[n]=t,this._n=n+1,this}},{key:"valueOf",value:function(){var t,e,n,i=this._partials,a=this._n,r=0;if(a>0){for(r=i[--a];a>0&&(t=r,!(n=(e=i[--a])-((r=t+e)-t))););a>0&&(n<0&&i[a-1]<0||n>0&&i[a-1]>0)&&((e=2*n)==(t=r+e)-r&&(r=t))}return r}}]),t}()}}])}();